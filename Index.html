<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portal de Herramientas</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* ----------- PANTALLA DE CARGA ----------- */
    #preloader {
      position: fixed;
      inset: 0;
      background: #ffffff;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    #preloader img {
      width: 240px;
      animation: bounceIn 4.2s ease-in-out;
    }

    .progress-bar {
      width: 0;
      height: 6px;
      background: #353535;
      border-radius: 3px;
      margin-top: 20px;
      animation: loadBar 2.8s ease-in-out forwards;
    }

    @keyframes bounceIn {
      0% { transform: scale(0.6); opacity: 0; }
      40% { transform: scale(1.3); opacity: 1; }
      60% { transform: scale(0.9); }
      100% { transform: scale(1); }
    }

    @keyframes loadBar {
      0% { width: 0; }
      100% { width: 220px; }
    }

    /* ===== Barra de b√∫squeda ===== */
    .search-wrap {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px; /* NUEVO: separa la lupa */
    }
    .search-wrap input[type="search"] {
      width: 720px;
      max-width: calc(100% - 40px);
      padding: 10px 14px;
      border-radius: 10px;
      border: 1px solid rgba(0,188,212,0.18);
      background: #f6f7f8;
      color: #111;
      outline: none;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      font-size: 1rem;
      transition: box-shadow 0.16s ease, transform 0.12s ease;
    }
    .search-wrap input[type="search"]:focus {
      box-shadow: 0 8px 20px rgba(0,188,212,0.12);
      transform: translateY(-1px);
      border-color: rgba(0,188,212,0.35);
    }
    .search-wrap input[type="search"]::placeholder {
      color: rgba(0,0,0,0.45);
    }

    /* NUEVO: estilo lupa */
    .search-icon {
      font-size: 1.2rem;
      color: #333;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    .search-icon:hover {
      transform: scale(1.15);
    }

    /* NUEVO: efecto hover para tarjetas */
    .video-item {
      transition: transform 0.2s ease, box-shadow 0.2s ease, border 0.2s ease;
      border: 1px solid transparent;
      border-radius: 8px;
    }
    .video-item:hover {
      border-color: rgba(0,188,212,0.4);
      box-shadow: 0 0 12px rgba(0,188,212,0.25);
      transform: translateY(-3px);
    }

    /* üîπ M√°rgenes generales para contenido */
    main, .contenido {
      padding: 40px 60px;
    }
  </style>
</head>
<body>
  <!-- üîπ PANTALLA DE CARGA -->
  <div id="preloader">
    <img src="imagenes/Logo.jpg" alt="Logo GAP" />
    <div class="progress-bar"></div>
    <audio id="bounceSound" src="archivos/rebote.mp3" preload="auto"></audio>
  </div>

  <header>
    <div class="logo">
      <img src="imagenes/Logo.jpg" alt="Logo GAP" style="height:38px; vertical-align:middle; margin-right:8px; border-radius:6px;">
      <span>Gesti√≥n Accesible para PyMEs</span>
    </div>
    <nav>
      <a href="index.html" class="active">Inicio</a>
      <a href="quienes-somos.html">Quienes Somos</a>
      <a href="nuestros-clientes.html">Nuestros Clientes</a>
      <a href="nuestros-servicios.html">Nuestros Servicios</a>
      <a href="contacto.html">Contacto</a>
      <a href="login.html" class="login-btn">Iniciar Sesi√≥n</a>
    </nav>
  </header>

  <!-- ===== BARRA DE B√öSQUEDA ===== -->
<div class="welcome-bar search-wrap">
  <div class="search-container">
    <input id="searchInput" type="search" placeholder="Buscar herramientas por t√≠tulo o palabra..." aria-label="Buscar herramientas">
    <span class="search-icon">üîç</span>
  </div>
</div>

  <!-- ===== CONTENEDOR DE RESULTADOS (estilo lista - oculta la grilla cuando se usa b√∫squeda) ===== -->
  <div id="searchResults" class="search-results hidden" aria-live="polite"></div>

  <main class="video-grid" id="videoGrid">
    <!-- Mantuve exactamente los 14 elementos y sus atributos tal como estaban
         Solo agregu√© data-desc donde corresponda para que la b√∫squeda filtre por descripci√≥n tambi√©n -->
    <a href="articulo.html?id=1" class="video-item" data-desc="Herramienta para calcular indices y ratios financieros">
      <img src="imagenes/indices-ratios.jpg" alt="√çndices & Ratios">
      <h3>√çndices & Ratios</h3>
    </a>
    <a href="articulo.html?id=2" class="video-item" data-desc="Calculador de punto de equilibrio para 6 productos">
      <img src="imagenes/punto-equilibrio.jpg" alt="Punto de Equilibrio">
      <h3>Calculador de Punto de Equilibrio (6 Productos)</h3>
    </a>
    <a href="articulo.html?id=3" class="video-item" data-desc="Calculador de intereses simples y compuestos">
      <img src="imagenes/intereses.jpg" alt="Calculador de Intereses">
      <h3>Calculador de Intereses</h3>
    </a>
    <a href="articulo.html?id=4" class="video-item" data-desc="Control y gesti√≥n de stock para PyMEs">
      <img src="imagenes/control-stock.jpg" alt="Control de Stock">
      <h3>Control de Stock</h3>
    </a>
    <a href="articulo.html?id=5" class="video-item" data-desc="Rutas criticas, CPM y diagramas de Gantt">
      <img src="imagenes/rutas-criticas.jpg" alt="Rutas Cr√≠ticas - CPM - Diagrama de Gantt">
      <h3>Rutas Cr√≠ticas - CPM - Diagrama de Gantt</h3>
    </a>
    <a href="articulo.html?id=6" class="video-item" data-desc="EVA y EBIDTA para evaluacion financiera">
      <img src="imagenes/eva-ebidta.jpg" alt="EVA y EBIDTA">
      <h3>EVA y EBIDTA</h3>
    </a>
    <a href="articulo.html?id=7" class="video-item" data-desc="Calculador metodo de Vogel para transporte">
      <img src="imagenes/vogel.jpg" alt="Calculador de Vogel">
      <h3>Calculador de Vogel</h3>
    </a>
    <a href="articulo.html?id=8" class="video-item" data-desc="Modelos de lineas de espera y colas (teoria de colas)">
      <img src="imagenes/lineas-espera.jpg" alt="Modelos de L√≠neas de Espera">
      <h3>Modelos de L√≠neas de Espera</h3>
    </a>
    <a href="articulo.html?id=9" class="video-item" data-desc="Plantilla general de gestion para PyMEs">
      <img src="imagenes/plantilla-general.jpg" alt="Plantilla General">
      <h3>Plantilla General</h3>
    </a>
    <a href="articulo.html?id=10" class="video-item" data-desc="Herramientas para presupuestos y presupuestacion">
      <img src="imagenes/presupuestos.jpg" alt="Presupuestos">
      <h3>Presupuestos</h3>
    </a>
    <a href="articulo.html?id=11" class="video-item" data-desc="Sistema contable para monotributistas version 5.1.0">
      <img src="imagenes/Sistema Contable para Monotributistas.jpg" alt="Sistema contable Monotributistas 5.1.0.xlsm">
      <h3>Sistema contable Monotributistas 5.1.0.xlsm</h3>
    </a>
    <a href="articulo.html?id=12" class="video-item" data-desc="SISTEMA CONTABLE V3.1 con especial ganancias">
      <img src="imagenes/sistema-contable.jpg" alt="SISTEMA CONTABLE V3.1 Especial Ganancias">
      <h3>SISTEMA CONTABLE V3.1 Especial Ganancias</h3>
    </a>
    <a href="articulo.html?id=13" class="video-item" data-desc="Sistema de honorarios 1.7 para profesionales">
      <img src="imagenes/honorarios.jpg" alt="Sistema de Honorarios 1.7">
      <h3>Sistema de Honorarios 1.7</h3>
    </a>
    <a href="articulo.html?id=14" class="video-item" data-desc="Analisis VAN y TIR para proyectos de inversion">
      <img src="imagenes/van-tir.jpg" alt="VAN y TIR">
      <h3>VAN y TIR</h3>
    </a>
  </main>

  <footer>
    <p>¬© 2025 Portal de Herramientas</p>
  </footer>

  <script>
        // üîπ Reproduce sonido al aparecer el logo
    const sound = document.getElementById('bounceSound');
    window.addEventListener('load', () => {
      // Asegura que el sonido se pueda reproducir incluso sin interacci√≥n previa
      const playPromise = sound.play();
      if (playPromise !== undefined) {
        playPromise.catch(() => {
          // En caso de bloqueo autom√°tico, reproduce tras una peque√±a interacci√≥n
          document.addEventListener('click', () => sound.play(), { once: true });
        });
      }

      // espera a que termine la animaci√≥n de la barra o, como fallback, 5s
     const progressBar = document.querySelector('.progress-bar');
     let removed = false;

     function hidePreloader() {
       if (removed) return;
       removed = true;
       const pre = document.getElementById('preloader');
       // efecto de fundido suave antes de ocultar
       pre.style.transition = 'opacity 0.28s ease';
      pre.style.opacity = '0';
       setTimeout(() => pre.style.display = 'none', 300);
     }

     // si la barra existe, espera su end de animaci√≥n
    if (progressBar) {
       progressBar.addEventListener('animationend', hidePreloader, { once: true });
       // fallback por si algo falla (ej: animaciones deshabilitadas)
       setTimeout(hidePreloader, 5000);
     } else {
       setTimeout(hidePreloader, 4200);
     }

    }); /* <-- CIERRE agregado: cierra window.addEventListener('load', ... ) */

    // ---- B√öSQUEDA (filtra por t√≠tulo o data-desc) ----
    const searchInput = document.getElementById('searchInput');
    const videoGrid = document.getElementById('videoGrid');
    const searchResults = document.getElementById('searchResults');

    // Recolecta items desde DOM (manteniendo estructura original)
    const items = Array.from(document.querySelectorAll('.video-item')).map(el => {
      return {
        title: el.querySelector('h3').innerText.trim(),
        desc: (el.dataset.desc || '').trim(),
        img: el.querySelector('img').getAttribute('src'),
        link: el.getAttribute('href'),
      };
    });


    // escucha input
    searchInput.addEventListener('input', () => {
      const q = searchInput.value.toLowerCase().trim();
      if (!q) {
        // restaurar grilla original
        videoGrid.classList.remove('hidden');
        searchResults.classList.add('hidden');
        searchResults.innerHTML = '';
        return;
      }

      // filtrar por t√≠tulo o descripci√≥n (cualquier palabra)
      const filtered = items.filter(it => {
        return it.title.toLowerCase().includes(q) || it.desc.toLowerCase().includes(q);
      });

      // construir resultados (una sola columna, estilo youtube)
      searchResults.innerHTML = filtered.map(it => {
        // escapado m√≠nimo para atributos
        const t = it.title.replace(/</g,'&lt;').replace(/>/g,'&gt;');
        const d = it.desc.replace(/</g,'&lt;').replace(/>/g,'&gt;');
        return `
          <a href="${it.link}" class="result-item fade-link">
            <img src="${it.img}" alt="">
            <div class="info">
              <h4>${t}</h4>
              <p>${d}</p>
            </div>
          </a>
        `;
      }).join('');

      // mostrar resultados y ocultar la grilla
      videoGrid.classList.add('hidden');
      searchResults.classList.remove('hidden');

      // agregar comportamiento de fade a los links reci√©n creados
      attachFadeToResults();
    });

    // ---- TRANSICI√ìN SUAVE (fade) para enlaces a art√≠culos ----
    function attachFadeToResults() {
      document.querySelectorAll('a.fade-link').forEach(a => {
        // evitar agregar m√∫ltiples listeners
        if (a.dataset.fadeBound) return;
        a.dataset.fadeBound = '1';
        a.addEventListener('click', e => {
          e.preventDefault();
          const href = a.href;
          document.body.classList.add('fade-out');
          setTimeout(() => window.location.href = href, 280);
        });
      });
    }

    // tambi√©n aplicamos fade a los items de la grilla (para navegaci√≥n desde grilla)
    document.querySelectorAll('.video-item').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const href = a.href;
        document.body.classList.add('fade-out');
        setTimeout(() => window.location.href = href, 280);
      });
    });
  </script>
</body>
</html>
